# 操作系统知识总结

## 进程互斥、通信和同步
进程之间存在两种基本关系：竞争关系和协作关系。
 
进程的互斥、同步、通信都是基于这两种基本关系而存在的，为了解决进程间竞争关系（对于资源的访问）而引入进程互斥；为了解决进程间松散的协作关系而引入进程同步；为了解决进程间紧密的协作关系而引入进程通信。

### 竞争
资源竞争出现了两个控制问题：一个是死锁 （deadlock ）问题，一组进程如果都获得了部分资源，还想要得到其他进程所占有的资源，最终所有的进程将陷入死锁。另一个是饥饿（starvation ）问题，这是指这样一种情况：一个进程由于其他进程总是优先于它而被无限期拖延。

## 进程/线程间同步机制
临界区、互斥区、事件、信号量四种方式  
临界区（Critical Section）、互斥量（Mutex）、信号量（Semaphore）、事件（Event）的区别：

1、临界区：通过对多线程的串行化来访问公共资源或一段代码，速度快，适合控制数据访问。

在任意时刻只允许一个线程对共享资源进行访问，如果有多个线程试图访问公共资源，那么在有一个线程进入后，其他试图访问公共资源的线程将被挂起，并一直等到进入临界区的线程离开，临界区在被释放后，其他线程才可以抢占。
2、互斥量：采用互斥对象机制。

只有拥有互斥对象的线程才有访问公共资源的权限，因为互斥对象只有一个，所以能保证公共资源不会同时被多个线程访问。互斥不仅能实现同一应用程序的公共资源安全共享，还能实现不同应用程序的公共资源安全共享 .互斥量比临界区复杂。因为使用互斥不仅仅能够在同一应用程序不同线程中实现资源的安全共享，而且可以在不同应用程序的线程之间实现对资源的安全共享。

3、信号量：它允许多个线程在同一时刻访问同一资源，但是需要限制在同一时刻访问此资源的最大线程数目.（PV原语）

4、事 件： 通过通知操作的方式来保持线程的同步，还可以方便实现对多个线程的优先级比较的操作 .

## 进程间通信方式
* 套接字（Socket）：常用的进程间通信机制，与其他通信机制不同的是，它可用于不同机器间的进程通信（带有ip）。
* 共享内存：使得多个进程可以访问同一块内存空间。通常与其它通信机制，如信号量结合使用，来达到进程间的同步及互斥。
* 信号量（semaphore）：信号量是一个计数器，可以用来控制多个进程对共享资源的访问。它常作为一种锁机制，防止某进程正在访问共享资源时，其他进程也访问该资源。因此，主要作为进程间以及同一进程内不同线程之间的同步手段。
* 管道（Pipe）：管道是一种半双工的通信方式，数据只能单向流动。有名管道允许无亲缘关系进程间的通信，无名管道只能在具有亲缘关系的进程间使用（父子进程）

## 线程间的通信方式
* 锁机制：包括互斥锁/量（mutex）、读写锁（reader-writer lock）、自旋锁（spin lock）、条件变量（condition）
  * 互斥锁/量（mutex）：提供了以排他方式防止数据结构被并发修改的方法。
  * 读写锁（reader-writer lock）：允许多个线程同时读共享数据，而对写操作是互斥的。
  * 自旋锁（spin lock）与互斥锁类似，都是为了保护共享资源。互斥锁是当资源被占用，申请者进入睡眠状态；而自旋锁则循环检测保持者是否已经释放锁。
* 条件变量（condition）：可以以原子的方式阻塞进程，直到某个特定条件为真为止。对条件的测试是在互斥锁的保护下进行的。条件变量始终与互斥锁一起使用。
* 信号量机制(Semaphore)
无名线程信号量
命名线程信号量
* 信号机制(Signal)：类似进程间的信号处理
* 屏障（barrier）：屏障允许每个线程等待，直到所有的合作线程都达到某一点，然后从该点继续执行。